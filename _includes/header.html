{% assign t = site.data[page.lang] | default: site.data.en %}
{% assign current_lang = page.lang | default: site.default_lang %}

<header class="site-header" role="banner">
  <nav class="nav-container" role="navigation" aria-label="Main navigation" itemscope itemtype="https://schema.org/SiteNavigationElement">
    <a href="{% if current_lang == 'en' %}/{% else %}/{{ current_lang }}/{% endif %}" class="logo" aria-label="{{ site.title }} - Home" itemprop="url">
      <img src="{{ '/assets/images/favicon.svg' | relative_url }}" alt="Keeplys logo" class="logo-icon" width="36" height="36" aria-hidden="true">
      <span class="logo-text" itemprop="name">Keeplys</span>
    </a>
    
    <div class="nav-links" role="menubar">
      <a href="#features" class="nav-link" role="menuitem" itemprop="url">{{ t.nav.features }}</a>
      <a href="#how-it-works" class="nav-link" role="menuitem" itemprop="url">{{ t.nav.how_it_works }}</a>
      <a href="{% if current_lang == 'en' %}/blog/{% else %}/{{ current_lang }}/blog/{% endif %}" class="nav-link" role="menuitem" itemprop="url">{{ t.nav.blog | default: "Blog" }}</a>
      <a href="#download" class="nav-link nav-link-cta" role="menuitem" itemprop="url">{{ t.nav.download }}</a>
    </div>
    
    <div class="nav-actions">
      <div class="language-switcher">
        <button class="lang-toggle" aria-label="Select language">
          <span class="lang-current">{{ current_lang | upcase }}</span>
          <svg class="lang-arrow" width="10" height="6" viewBox="0 0 10 6" fill="none">
            <path d="M1 1L5 5L9 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </button>
        <div class="lang-dropdown">
          <a href="/" class="lang-option {% if current_lang == 'en' %}active{% endif %}">English</a>
          <a href="/de/" class="lang-option {% if current_lang == 'de' %}active{% endif %}">Deutsch</a>
          <a href="/it/" class="lang-option {% if current_lang == 'it' %}active{% endif %}">Italiano</a>
          <a href="/es/" class="lang-option {% if current_lang == 'es' %}active{% endif %}">Espa√±ol</a>
        </div>
      </div>
      
      <button class="mobile-menu-toggle" aria-label="Toggle menu">
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>
  
  <div class="mobile-menu">
    <a href="#features" class="mobile-link">{{ t.nav.features }}</a>
    <a href="#how-it-works" class="mobile-link">{{ t.nav.how_it_works }}</a>
    <a href="{% if current_lang == 'en' %}/blog/{% else %}/{{ current_lang }}/blog/{% endif %}" class="mobile-link">{{ t.nav.blog | default: "Blog" }}</a>
    <a href="#download" class="mobile-link">{{ t.nav.download }}</a>
    <div class="mobile-langs">
      <a href="/" class="mobile-lang {% if current_lang == 'en' %}active{% endif %}">EN</a>
      <a href="/de/" class="mobile-lang {% if current_lang == 'de' %}active{% endif %}">DE</a>
      <a href="/it/" class="mobile-lang {% if current_lang == 'it' %}active{% endif %}">IT</a>
      <a href="/es/" class="mobile-lang {% if current_lang == 'es' %}active{% endif %}">ES</a>
    </div>
  </div>
</header>

