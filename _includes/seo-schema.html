{% assign t = site.data[page.lang] | default: site.data.en %}
{% assign current_lang = page.lang | default: site.default_lang %}
{% assign lang_region = site.language_regions[current_lang] | default: current_lang %}

<!-- Organization Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "@id": "{{ site.url }}/#organization",
  "name": "{{ site.organization.name }}",
  "legalName": "{{ site.organization.legal_name }}",
  "url": "{{ site.url }}",
  "logo": {
    "@type": "ImageObject",
    "url": "{{ site.url }}{{ site.organization.logo }}",
    "width": 512,
    "height": 512
  },
  "email": "{{ site.organization.email }}",
  "foundingDate": "{{ site.organization.founded }}",
  "sameAs": [
    "https://twitter.com/{{ site.twitter }}",
    "https://github.com/{{ site.github }}"
  ],
  "contactPoint": {
    "@type": "ContactPoint",
    "email": "{{ site.organization.email }}",
    "contactType": "customer support",
    "availableLanguage": {{ site.languages | jsonify }}
  },
  "areaServed": {{ site.organization.service_areas | jsonify }}
}
</script>

<!-- SoftwareApplication Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "@id": "{{ site.url }}/#app",
  "name": "{{ site.title }}",
  "description": "{{ t.meta.description }}",
  "applicationCategory": "{{ site.seo.application_category }}",
  "operatingSystem": "{{ site.seo.operating_system }}",
  "url": "{{ site.url }}",
  "image": "{{ site.url }}/assets/images/og-image.png",
  "screenshot": "{{ site.url }}/assets/images/app-screenshot.png",
  "author": {
    "@type": "Organization",
    "@id": "{{ site.url }}/#organization"
  },
  "publisher": {
    "@type": "Organization",
    "@id": "{{ site.url }}/#organization"
  },
  "offers": {
    "@type": "Offer",
    "price": "{{ site.seo.price }}",
    "priceCurrency": "{{ site.seo.currency }}",
    "availability": "https://schema.org/InStock"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "{{ site.seo.rating }}",
    "ratingCount": "{{ site.seo.rating_count }}",
    "bestRating": "5",
    "worstRating": "1"
  },
  "downloadUrl": [
    "{{ site.app_store_url }}",
    "{{ site.play_store_url }}"
  ],
  "featureList": [
    "{{ t.features.items[0].title }}",
    "{{ t.features.items[1].title }}",
    "{{ t.features.items[2].title }}",
    "{{ t.features.items[3].title }}",
    "{{ t.features.items[4].title }}",
    "{{ t.features.items[5].title }}"
  ],
  "inLanguage": "{{ lang_region }}"
}
</script>

<!-- WebSite Schema with SearchAction -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "@id": "{{ site.url }}/#website",
  "name": "{{ site.title }}",
  "url": "{{ site.url }}",
  "description": "{{ t.meta.description }}",
  "inLanguage": "{{ lang_region }}",
  "publisher": {
    "@type": "Organization",
    "@id": "{{ site.url }}/#organization"
  }
}
</script>

<!-- WebPage Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "@id": "{{ site.url }}{{ page.url }}#webpage",
  "url": "{{ site.url }}{{ page.url }}",
  "name": "{{ t.meta.title }}",
  "description": "{{ t.meta.description }}",
  "inLanguage": "{{ lang_region }}",
  "isPartOf": {
    "@type": "WebSite",
    "@id": "{{ site.url }}/#website"
  },
  "about": {
    "@type": "SoftwareApplication",
    "@id": "{{ site.url }}/#app"
  },
  "datePublished": "2024-01-01",
  "dateModified": "{{ site.time | date: '%Y-%m-%d' }}"
}
</script>

{% if page.url == '/' or page.url == '/de/' or page.url == '/it/' or page.url == '/es/' %}
<!-- FAQ Schema for landing pages -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is Keeplys?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Keeplys is a document scanning and organization app that helps you digitize, store, and organize your important documents. Available on iOS and Android."
      }
    },
    {
      "@type": "Question",
      "name": "Is Keeplys free to use?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, Keeplys is free to download and use. You can scan, store, and organize documents without any cost."
      }
    },
    {
      "@type": "Question",
      "name": "How secure is Keeplys?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Keeplys uses bank-level encryption to protect your documents. Your data is stored securely in your personal cloud account (iCloud or Google Drive)."
      }
    },
    {
      "@type": "Question",
      "name": "Can I access my documents offline?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, Keeplys allows you to access your recently viewed documents without an internet connection. Sync happens automatically when you're back online."
      }
    }
  ]
}
</script>
{% endif %}

{% if page.url contains 'privacy' or page.url contains 'terms' %}
<!-- BreadcrumbList Schema for legal pages -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ site.url }}{% if current_lang != 'en' %}/{{ current_lang }}{% endif %}/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{% if page.url contains 'privacy' %}{{ t.footer.privacy }}{% else %}{{ t.footer.terms }}{% endif %}",
      "item": "{{ site.url }}{{ page.url }}"
    }
  ]
}
</script>
{% endif %}

